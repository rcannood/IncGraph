---
title: "IncGraph"
output:
  md_document: 
     variant: markdown_github
---

# incgraph

[![Build Status](https://travis-ci.org/rcannood/incgraph.png?branch=master)](https://travis-ci.org/rcannood/incgraph)

IncGraph incrementally calculates the differences in orbit counts when performing single edge modifications in a network. For evolving networks, calculating the differences in orbit counts is much more performant than recalculating all orbit counts from scratch for each time point.

## Install
IncGraph currently needs to be installed using devtools. When building for Windows, the correct version of Rtools also needs to be installed.

```R
devtools::install_github("rcannood/IncGraph")
```

## Examples
Create a new (empty) network with 4 nodes

```R
net <- new.incgraph.network(amnt.nodes = 4)
```

Create a new network with 4 nodes and some edges
```R
net <- new.incgraph.network(links = matrix(c(1, 2, 2, 3, 1, 4), ncol=2))
```

Create a new network with 10 nodes and some edges
```R
net <- new.incgraph.network(amnt.nodes = 10, links = matrix(c(1, 2, 2, 3, 1, 4), ncol=2))
```

Create a more complex network from a matrix
```R
mat <- matrix(c(1, 2, 
                1, 3, 
                1, 4, 
                1, 5, 
                1, 6, 
                1, 7, 
                2, 7, 
                2, 8, 
                2, 9, 
                2, 10), ncol=2)
net <- new.incgraph.network(links=mat)
```

Calculate the initial orbit counts using orca 
```R
orb.counts <- calculate.orbit.counts(net)
```

Modify an edge and calculate the differences in orbit counts
```R
flip(net, 5, 10) # add (5,10)
delta1 <- calculate.delta(net, 5, 10)
```

Modify another edge
```R
flip(net, 6, 10) # add (6, 10)
delta2 <- calculate.delta(net, 6, 10)
```

And another
```R
flip(net, 1, 5)  # remove (1, 5)
delta3 <- calculate.delta(net, 1, 5)
```

Verify that the new orbit counts equals the old orbit counts plus the delta counts
```R
new.orb.counts.incremental <- orb.counts + 
  delta1$add - delta1$rem +
  delta2$add - delta2$rem +
  delta3$add - delta3$rem
new.orb.counts <- calculate.orbit.counts(net)
all(new.orb.counts.incremental == new.orb.counts) # TRUE
```

## Examples of additional helper functions
Transform the network to a matrix
```R
network.as.matrix(net)
```

Get all neighbours of a node
```R
get.neighbours(net, 1)
```

Does the network contain a specific interaction?
```R
contains(net, 5, 10)
contains(net, 7, 10)
```

Reinitialise to an empty network
```R
reset(net)
network.as.matrix(net)
```
